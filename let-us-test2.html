<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
</body>
<script>
    import { useEffect, useRef } from "react";

const SPEED = 0.02;

const Background = () => {
  const canvasRef = useRef < HTMLCanvasElement > null;

  useEffect(() => {
    const canvas = canvasRef.current;

    if (canvas) {
      const ctx = canvas.getContext("2d");

      let time = 0;

      const loop = function () {
        for (let x = 0; x <= 32; x++) {
          for (let y = 0; y <= 32; y++) {
            color(ctx, {
              x,
              y,
              r: R(x, y, time),
              g: G(x, y, time),
              b: B(x, y, time),
            });
          }
        }

        time = time + SPEED;

        window.requestAnimationFrame(loop);
      };

      loop();
    }
  }, []);

  return <canvas ref={canvasRef} width="32px" height="32px" />;
};
const C1 = 191;
const C2 = 64;

export const color = function (context, { x, y, r, g, b }) {
  context.fillStyle = `rgb(${r}, ${g}, ${b})`;
  context.fillRect(x, y, 1, 1);
};

export const R = function (x, y, time) {
  return Math.floor(C1 + C2 * Math.cos((x * x - y * y) / 300 + time));
};

export const G = function (x, y, time) {
  return Math.floor(
    C1 +
      C2 *
        Math.sin(
          (x * x * Math.cos(time / 4) + y * y * Math.sin(time / 3)) / 300
        )
  );
};

export const B = function (x, y, time) {
  return Math.floor(
    C1 +
      C2 *
        Math.sin(
          5 * Math.sin(time / 9) +
            ((x - 100) * (x - 100) + (y - 100) * (y - 100)) / 1100
        )
  );
};


/*let temp = gradList[0];
    gradCount++;
    if(gradCount%60 == 1){
        if(gradBool){
            for(let i = 0; i < gradList.length - 1; i++){
                gradList[i] = gradList[i+1];
            }
            gradBool = !gradBool;
        }
        else{
            for(let i = gradList.length-1; i <= 1; i--){
                gradList[i] = gradList[i-1];
            }
            gradBool = !gradBool;
        }
        
    }
    gradList[gradList.length-1] = temp;
    console.log(gradList);
    gradient = utils.getLinearGradient(ctx,0,0,0,canvasHeight*5,[{percent:0.05,color:gradList[0]},{percent:0.1,color:gradList[1]},{percent:0.15,color:gradList[2]}, {percent:0.2,color:gradList[3]},{percent:0.25,color:gradList[4]} ,{percent:0.3,color:gradList[5]}, {percent:0.35,color:gradList[6]}, {percent:0.4,color:gradList[7]}, {percent:0.45,color:gradList[8]},{percent:0.5,color:gradList[9]},{percent:0.55,color:gradList[10]},{percent:0.6,color:gradList[11]},{percent:0.65,color:gradList[12]},{percent:0.7,color:gradList[13]},{percent:0.75,color:gradList[14]},{percent:0.8,color:gradList[15]},{percent:0.85,color:gradList[16]},{percent:0.9,color:gradList[17]},{percent:0.95,color:gradList[18]},{percent:1,color:gradList[19]}]);
    */
</script>
</html>