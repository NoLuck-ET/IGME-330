/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/audio.js":
/*!**********************!*\
  !*** ./src/audio.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"analyserNode\": () => (/* binding */ analyserNode),\n/* harmony export */   \"audioCtx\": () => (/* binding */ audioCtx),\n/* harmony export */   \"biquadFilter\": () => (/* binding */ biquadFilter),\n/* harmony export */   \"distortionFilter\": () => (/* binding */ distortionFilter),\n/* harmony export */   \"getNote\": () => (/* binding */ getNote),\n/* harmony export */   \"loadSoundFile\": () => (/* binding */ loadSoundFile),\n/* harmony export */   \"lowShelfBiquadFilter\": () => (/* binding */ lowShelfBiquadFilter),\n/* harmony export */   \"pauseCurrentSound\": () => (/* binding */ pauseCurrentSound),\n/* harmony export */   \"playCurrentSound\": () => (/* binding */ playCurrentSound),\n/* harmony export */   \"setVolume\": () => (/* binding */ setVolume),\n/* harmony export */   \"setupWebaudio\": () => (/* binding */ setupWebaudio)\n/* harmony export */ });\n// 1 - our WebAudio context, **we will export and make this public at the bottom of the file**\nvar audioCtx;\n\n// **These are \"private\" properties - these will NOT be visible outside of this module (i.e. file)**\n// 2 - WebAudio nodes that are part of our WebAudio audio routing graph\nvar element, audioData, sourceNode, analyserNode, gainNode, biquadFilter, lowShelfBiquadFilter, distortionFilter, osc;\n\n// 3 - here we are faking an enumeration\nvar DEFAULTS = Object.freeze({\n  gain: .5,\n  numSamples: 256\n});\n\n// 4 - create a new array of 8-bit integers (0-255)\n// this is a typed array to hold the audio frequency data\n//let audioData = new Uint8Array(DEFAULTS.numSamples/2);\n//\n\n// **Next are \"public\" methods - we are going to export all of these at the bottom of this file**\nvar setupWebaudio = function setupWebaudio() {\n  // 1 - The || is because WebAudio has not been standardized across browsers yet\n  var AudioContext = window.AudioContext || window.webkitAudioContext;\n  audioCtx = new AudioContext();\n\n  // 2 - this creates an <audio> element\n  element = new Audio(); // document.querySelector(\"audio\");\n\n  // 3 - have it point at a sound file\n  loadSoundFile(\"./media/Stop a Gaben.mp3\"); // loadSoundFile(filepath); \n\n  // 4 - create an a source node that points at the <audio> element\n  sourceNode = audioCtx.createMediaElementSource(element);\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode\n  biquadFilter = audioCtx.createBiquadFilter();\n  biquadFilter.type = \"highshelf\";\n  // biquadFilter.frequency.setValueAtTime(1000, audioCtx.currentTime);\n  // biquadFilter.gain.setValueAtTime(25, audioCtx.currentTime);\n\n  lowShelfBiquadFilter = audioCtx.createBiquadFilter();\n  lowShelfBiquadFilter.type = \"lowshelf\";\n  distortionFilter = audioCtx.createWaveShaper();\n  distortionFilter.type = \"distortion\";\n\n  // 5 - create an analyser node\n  analyserNode = audioCtx.createAnalyser(); // note the UK spelling of \"Analyser\"\n  analyserNode.minDecibels = -100;\n  analyserNode.maxDecibels = -10;\n  analyserNode.smoothingTimeConstant = 0.85;\n  /*\r\n  // 6\r\n  We will request DEFAULTS.numSamples number of samples or \"bins\" spaced equally \r\n  across the sound spectrum.\r\n    If DEFAULTS.numSamples (fftSize) is 256, then the first bin is 0 Hz, the second is 172 Hz, \r\n  the third is 344Hz, and so on. Each bin contains a number between 0-255 representing \r\n  the amplitude of that frequency.\r\n  */\n\n  // fft stands for Fast Fourier Transform\n  analyserNode.fftSize = DEFAULTS.numSamples;\n\n  // 7 - create a gain (volume) node\n  gainNode = audioCtx.createGain();\n  gainNode.gain.value = DEFAULTS.gain;\n  osc = audioCtx.createOscillator();\n  osc.frequency.value = 440;\n\n  // 8 - connect the nodes - we now have an audio graph\n  sourceNode.connect(biquadFilter);\n  biquadFilter.connect(distortionFilter);\n  distortionFilter.connect(lowShelfBiquadFilter);\n  lowShelfBiquadFilter.connect(analyserNode);\n  analyserNode.connect(gainNode);\n  osc.connect(gainNode);\n  gainNode.connect(audioCtx.destination);\n};\nvar loadSoundFile = function loadSoundFile(filepath) {\n  element.src = filepath;\n};\nvar playCurrentSound = function playCurrentSound() {\n  element.play();\n};\nvar pauseCurrentSound = function pauseCurrentSound() {\n  element.pause();\n};\nvar setVolume = function setVolume(value) {\n  value = Number(value); // make sure that it's a Number rather than a String\n  gainNode.gain.value = value;\n};\n\n// Addapted from online instructions with permission of author: Chris Wilson || Namely used for the autoCorrelate function\n// ============================================================================================================================================================================================\nvar getNote = function getNote() {\n  var bufferLength = analyserNode.fftSize;\n  var buffer = new Float32Array(bufferLength);\n  analyserNode.getFloatTimeDomainData(buffer);\n  var autoCorrelateValue = autoCorrelate(buffer, audioCtx.sampleRate);\n\n  // Handle rounding\n  var valueToDisplay = autoCorrelateValue;\n\n  //console.log(`valueToDisplay : ${valueToDisplay}`);\n  return valueToDisplay;\n};\n\n// Must be called on analyser.getFloatTimeDomainData and audioContext.sampleRate\nvar autoCorrelate = function autoCorrelate(buffer, sampleRate) {\n  // Perform a quick root-mean-square to see if we have enough signal\n  var SIZE = buffer.length;\n  var sumOfSquares = 0;\n  for (var i = 0; i < SIZE; i++) {\n    var val = buffer[i];\n    sumOfSquares += val * val;\n  }\n  var rootMeanSquare = Math.sqrt(sumOfSquares / SIZE);\n  if (rootMeanSquare < 0.01) {\n    return -1;\n  }\n\n  // Find a range in the buffer where the values are below a given threshold.\n  var r1 = 0;\n  var r2 = SIZE - 1;\n  var threshold = 0.2;\n\n  // Walk up for r1\n  for (var _i = 0; _i < SIZE / 2; _i++) {\n    if (Math.abs(buffer[_i]) < threshold) {\n      r1 = _i;\n      break;\n    }\n  }\n\n  // Walk down for r2\n  for (var _i2 = 1; _i2 < SIZE / 2; _i2++) {\n    if (Math.abs(buffer[SIZE - _i2]) < threshold) {\n      r2 = SIZE - _i2;\n      break;\n    }\n  }\n\n  // Trim the buffer to these ranges and update SIZE.\n  buffer = buffer.slice(r1, r2);\n  SIZE = buffer.length;\n\n  // Create a new array of the sums of offsets to do the autocorrelation\n  var c = new Array(SIZE).fill(0);\n  // For each potential offset, calculate the sum of each buffer value times its offset value\n  for (var _i3 = 0; _i3 < SIZE; _i3++) {\n    for (var j = 0; j < SIZE - _i3; j++) {\n      c[_i3] = c[_i3] + buffer[j] * buffer[j + _i3];\n    }\n  }\n\n  // Find the last index where that value is greater than the next one (the dip)\n  var d = 0;\n  while (c[d] > c[d + 1]) {\n    d++;\n  }\n\n  // Iterate from that index through the end and find the maximum sum\n  var maxValue = -1;\n  var maxIndex = -1;\n  for (var _i4 = d; _i4 < SIZE; _i4++) {\n    if (c[_i4] > maxValue) {\n      maxValue = c[_i4];\n      maxIndex = _i4;\n    }\n  }\n  var T0 = maxIndex;\n\n  // From the original author:\n  // interpolation is parabolic interpolation. It helps with precision. We suppose that a parabola pass through the\n  // three points that comprise the peak. 'a' and 'b' are the unknowns from the linear equation system and b/(2a) is\n  // the \"error\" in the abscissa. Well x1,x2,x3 should be y1,y2,y3 because they are the ordinates.\n  var x1 = c[T0 - 1];\n  var x2 = c[T0];\n  var x3 = c[T0 + 1];\n  var a = (x1 + x3 - 2 * x2) / 2;\n  var b = (x3 - x1) / 2;\n  if (a) {\n    T0 = T0 - b / (2 * a);\n  }\n  return sampleRate / T0;\n};\n// ============================================================================================================================================================================================\n\n\n\n//# sourceURL=webpack://alexiou-l-hw2/./src/audio.js?");

/***/ }),

/***/ "./src/canvas.js":
/*!***********************!*\
  !*** ./src/canvas.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"draw\": () => (/* binding */ draw),\n/* harmony export */   \"fire\": () => (/* binding */ fire),\n/* harmony export */   \"setupCanvas\": () => (/* binding */ setupCanvas)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n/* harmony import */ var _loader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loader.js */ \"./src/loader.js\");\n/* harmony import */ var _audio_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./audio.js */ \"./src/audio.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n/*\r\n\tThe purpose of this file is to take in the analyser node and a <canvas> element: \r\n\t  - the module will create a drawing context that points at the <canvas> \r\n\t  - it will store the reference to the analyser node\r\n\t  - in draw(), it will loop through the data in the analyser node\r\n\t  - and then draw something representative on the canvas\r\n\t  - maybe a better name for this file/module would be *visualizer.js* ?\r\n*/\n\n\n\n\nvar ctx, canvasWidth, canvasHeight, analyserNode, audioData;\nvar images = [];\nvar rotation = 0;\nvar towers = [];\nvar stepIncrement = 0;\nvar fire;\nvar TowerSprite = /*#__PURE__*/function () {\n  function TowerSprite() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$x = _ref.x,\n      x = _ref$x === void 0 ? 0 : _ref$x,\n      _ref$y = _ref.y,\n      y = _ref$y === void 0 ? 0 : _ref$y,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 30 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? -(0,_audio_js__WEBPACK_IMPORTED_MODULE_2__.getNote)() / 7 <= -200 ? 0 : -(0,_audio_js__WEBPACK_IMPORTED_MODULE_2__.getNote)() / 7 : _ref$height;\n    _classCallCheck(this, TowerSprite);\n    // - Uses destructuring to create defaults, as well as a default for the entire thing\n    // Initialize properties\n    this.x = x;\n    this.y = y;\n    this.body = images[2];\n    this.width = width;\n    this.height = height;\n    this.color = _utils_js__WEBPACK_IMPORTED_MODULE_0__.getRandomColor();\n    //console.log(`${this.constructor.type} created with params of: x:${this.x}, height: ${this.height}, width: ${this.width}`);\n    return Object.seal(this); // No longer able to add properties\n  }\n  _createClass(TowerSprite, [{\n    key: \"update\",\n    value: function update() {\n      // Increase the .x property by 1\n      this.x += 1;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx) {\n      // Draw a tower at the x & y\n      ctx.save();\n      ctx.translate(-50, canvasHeight);\n      ctx.fillStyle = this.color;\n      ctx.beginPath();\n      ctx.rect(this.x, 0, this.width, this.height);\n      ctx.closePath();\n      ctx.fill();\n      ctx.drawImage(this.body, this.x, this.height - 26, this.width, 300);\n      ctx.restore();\n    }\n  }]);\n  return TowerSprite;\n}();\n_defineProperty(TowerSprite, \"type\", \"tower\");\nvar FireSprite = /*#__PURE__*/function () {\n  function FireSprite() {\n    _classCallCheck(this, FireSprite);\n    //initialize properties | No defaults, there's only one.\n    this.x = 0;\n    this.y = 0;\n    this.width = 204;\n    this.height = 195;\n    this.body = images[4];\n    this.control = 0;\n    this.frequency = 0;\n    this.transparency = 0;\n    return Object.seal(this); // No longer able to add properties\n  }\n  _createClass(FireSprite, [{\n    key: \"setTransparency\",\n    value: function setTransparency(value) {\n      this.transparency = value;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      if (this.frequency == 3) {\n        // so that it updates at 30 fps instead of 60\n        this.x += this.width;\n        if (this.control == 2 && this.x >= 408) {\n          // will prevent the animation from showing that false-frame\n          this.control = 0;\n          this.x = 0;\n          this.y = 0;\n        }\n        //Once x goes out of range, reset it & got to next y-level.\n        if (this.x >= 612) {\n          this.x = 0;\n          this.y += this.height;\n          this.control++;\n        }\n        //Once y goes out of range, reset it.\n        if (this.y > 612) {\n          this.y = 0;\n        }\n        this.frequency = 0;\n      }\n      this.frequency++;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(body, ctx) {\n      ctx.save();\n      ctx.globalAlpha = this.transparency;\n      ctx.drawImage(body, this.x, this.y, this.width, this.height, 0, 0, canvasWidth, canvasHeight * 1.2);\n      ctx.restore();\n      //console.log(`x: ${this.x}       y: ${this.y}`);\n    }\n  }]);\n  return FireSprite;\n}();\n_defineProperty(FireSprite, \"type\", \"fire\");\nfire = new FireSprite();\nvar setupCanvas = function setupCanvas(canvasElement, analyserNodeRef) {\n  // create drawing context\n  ctx = canvasElement.getContext(\"2d\");\n  canvasWidth = canvasElement.width;\n  canvasHeight = canvasElement.height;\n  // keep a reference to the analyser node\n  analyserNode = analyserNodeRef;\n  // this is the array where the analyser data will be stored\n  audioData = new Uint8Array(analyserNode.fftSize / 2);\n  images = _loader_js__WEBPACK_IMPORTED_MODULE_1__.images;\n};\nvar draw = function draw() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  rotation += .003;\n  stepIncrement++;\n  // 1 - populate the audioData array with the frequency data from the analyserNode\n  // notice these arrays are passed \"by reference\" \n  //analyserNode.getByteFrequencyData(audioData);\n  // OR\n  analyserNode.getByteTimeDomainData(audioData); // waveform data\n\n  // 2 - draw background\n  ctx.save();\n  ctx.fillStyle = \"black\";\n  ctx.globalAlpha = 0.1;\n  ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n  ctx.restore();\n\n  // 3 - draw custom gradient image\n  ctx.beginPath();\n  ctx.closePath();\n  ctx.save();\n  ctx.translate(canvasWidth / 2, canvasHeight);\n  ctx.rotate(rotation);\n  //ctx.drawImage(images[3],-1000,-1000,2000,2000);\n  ctx.drawImage(images[3], -575, -575, 1150, 1150);\n  //console.log(images[3]);\n  ctx.restore();\n\n  // 4 - drawing images\n  drawCelestialBody(0, -canvasHeight + 60, images[0], rotation, \"#53676C\", params);\n  drawCelestialBody(0, canvasHeight - 60, images[1], rotation, \"#FFC257\", params);\n  fire.update();\n  fire.draw(images[4], ctx); // some reason, it doesn't like when I have the image to draw set in constructor - odd\n\n  //creating towers\n  if (stepIncrement >= 31) {\n    stepIncrement = 0;\n    towers.push(new TowerSprite(0, 50, 30, 30));\n  }\n\n  //drawing towers\n  for (var i = 0; i < towers.length; i++) {\n    towers[i].update();\n    towers[i].draw(ctx);\n    if (towers[i].x > canvasWidth + 90) {\n      towers.splice(i, 1);\n      //console.log(\"last tower deleted\");\n    }\n  }\n\n  // 5 - bitmap manipulation\n  // A) grab all of the pixels on the canvas and put them in the `data` array\n  // `imageData.data` is a `Uint8ClampedArray()` typed array that has 1.28 million elements!\n  // the variable `data` below is a reference to that array \n  var imageData = ctx.getImageData(0, 0, canvasWidth, canvasHeight);\n  var data = imageData.data;\n  var length = data.length;\n  var width = imageData.width; // not using here\n  // B) Iterate through each pixel, stepping 4 elements at a time (which is the RGBA for 1 pixel)\n  for (var _i = 0; _i < length; _i += 4) {\n    //----------------- PERSONAL NOTE: Too noisy\n    // C) randomly change every 20th pixel to red\n    if (params.showNoise && Math.random() < 0.5) {\n      data[_i] = data[_i + 1] = data[_i + 2] = 0; // zero out the red and green and blue channels\n      data[_i] = 150; // make the red channel slightly red\n      data[_i + 1] = 125; // make the gren channel a tad green\n      data[_i + 2] = 255; // make the blue channel very blue\n    } // end if\n\n    //invert?\n    if (params.showInvert) {\n      var red = data[_i],\n        green = data[_i + 1],\n        blue = data[_i + 2];\n      data[_i] = 255 - red;\n      data[_i + 1] = 255 - green;\n      data[_i + 2] = 255 - blue;\n      //data[i+3] is the alpha, we're leaving that alone\n    } // end if\n  } // end for\n\n  // note we are stepping through *each* sub-pixel\n  if (params.showEmboss) {\n    // emboss effect\n    for (var _i2 = 0; _i2 < length; _i2++) {\n      if (_i2 % 4 == 3) continue; // skip alpha channel\n      data[_i2] = 127 + 2 * data[_i2] - data[_i2 + 4] - data[_i2 + width * 4];\n    }\n  }\n\n  // D) copy image data back to canvas\n  ctx.putImageData(imageData, 0, 0);\n}; // end draw\n\n//helper functions \n\n// drawCelestialBody - Helper function to draw sun & moon, as well as their respective bars & \"circles\".\nvar drawCelestialBody = function drawCelestialBody(x, y, body, rotation, color, params) {\n  ctx.save();\n  ctx.translate(canvasWidth / 2, canvasHeight);\n  ctx.save();\n  ctx.rotate(rotation);\n  ctx.translate(x, y);\n  ctx.save();\n  ctx.beginPath();\n  if (params.showCircles) {\n    ctx.lineJoin = \"round\";\n    ctx.moveTo(0, 35 + audioData[0] / 5);\n    for (var i = 0; i < audioData.length; i++) {\n      //points[i] = (Math.random() * 15) + 50;\n      //ctx.lineTo(0,35 + audioData[i]/5);\n      ctx.bezierCurveTo(0, 35 + audioData[i] / 5, 0, 35 + audioData[i] / 5, 0, 35 + audioData[i] / 5);\n      ctx.rotate(Math.PI * 2 / 128); // 0.015625\n    }\n\n    ctx.closePath();\n    ctx.fillStyle = color;\n    ctx.fill();\n  }\n  ctx.restore();\n  ctx.save();\n  //following loop is for \"bars\" mode\n  if (params.showBars) {\n    ctx.beginPath();\n    for (var _i3 = 0; _i3 < audioData.length; _i3++) {\n      var currentPos = audioData[_i3] / 5;\n      ctx.moveTo(0, 15 + currentPos);\n      //points[i] = (Math.random() * 15) + 50;\n      ctx.lineTo(0, 35 + currentPos);\n      ctx.rotate(Math.PI * 2 / 128); // 0.015625\n    }\n\n    ctx.closePath();\n    ctx.strokeStyle = \"white\"; // used only if in bars mode\n    ctx.stroke();\n  }\n  ctx.restore();\n  //console.log(audioData.length);\n\n  //ctx.stroke(); // used only if in bars mode\n  //ctx.fill();\n  ctx.drawImage(body, -50, -50, 100, 100);\n  ctx.restore();\n  ctx.restore();\n};\n\n\n//# sourceURL=webpack://alexiou-l-hw2/./src/canvas.js?");

/***/ }),

/***/ "./src/loader.js":
/*!***********************!*\
  !*** ./src/loader.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"images\": () => (/* binding */ images),\n/* harmony export */   \"preloadImage\": () => (/* binding */ preloadImage)\n/* harmony export */ });\n/* harmony import */ var _main_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main.js */ \"./src/main.js\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n\n\nvar images = [];\n//let transfer = [];\n\nwindow.onload = function () {\n  console.log(\"window.onload called\");\n  // 1 - do \n  //images\n  images.push(preloadImage(\"./images/moon.png\"));\n  images.push(preloadImage(\"./images/sun.png\"));\n  images.push(preloadImage(\"./images/tower.png\"));\n  images.push(preloadImage(\"./images/sunset.png\"));\n  images.push(preloadImage(\"./images/fire.png\"));\n\n  // preload here - images, additional sounds, etc...\n  loadJsonXHR();\n  // 2 - start up app\n  _main_js__WEBPACK_IMPORTED_MODULE_0__.init();\n};\nvar preloadImage = function preloadImage(url) {\n  var img = new Image();\n  img.onload = function () {\n    console.log(\"Image at url \\\"\".concat(url, \"\\\" successfully loaded.\"));\n  };\n  img.onerror = function () {\n    console.log(\"Image at url \\\"\".concat(url, \"\\\" wouldn't load! Check your URL!\"));\n  };\n\n  // start downloading the image (it is located on an RIT server)\n  img.src = url;\n  return img;\n};\n\n//loads and evaluates JSON, applies changes to the HTML according to data in JSON\nfunction loadJsonXHR() {\n  var url = \"./data/av-data.json\";\n  var xhr = new XMLHttpRequest();\n  xhr.onload = function (e) {\n    //preload\n    console.log(\"In onload - HTTP Status Code = \".concat(e.target.status));\n    var string = e.target.responseText;\n    var json;\n    try {\n      json = JSON.parse(string);\n    } catch (err) {\n      console.log(\"Error: \".concat(err));\n      document.querySelector(\"#track-select\").innerHTML = \"JSON ERROR\";\n      return;\n    }\n\n    //set up songs list\n    var songs = json.songs;\n    var songHtml;\n    songHtml += \"<option value=\\\"media/\".concat(songs[0].fileName, \"\\\">\").concat(songs[0].name, \"</option> \");\n    for (var i = 1; i < songs.length; i++) {\n      songHtml += \"<option value=\\\"media/\".concat(songs[i].fileName, \"\\\">\").concat(songs[i].name, \"</option> \");\n    }\n    document.querySelector(\"#track-select\").innerHTML = songHtml;\n    //establish title \n    document.querySelector(\"h1\").innerHTML = json.appTitle || \"Not Working\"; // The \"||\" means that the default will only become real if a falsey value is the primary\n\n    //handling the images - DOESN'T WORK, loads out of order. I can't find a way to fix it online without\n    //\t\t\t\t\t    causing errors in canvas.js because it ends up either loading out of order or\n    //\t\t\t\t\t\tstarting the drawing process before loading. No idea why.\n    /*const imageData = json.images;\r\n    for(let i = 0; i < imageData.length; i++){\r\n    \timages.push(preloadImage(`./images/${imageData[i].fileName}`));\r\n    \tconsole.log(`${imageData[i].fileName}`);\r\n    \tsetTimeout(2); // so there is enough time to load - REQUIRED, otherwise files loaded out of order.\r\n    }*/\n\n    //let instHTML = `<ol>${intructions.map(w => `<li>${w}</li>`).join(\"\")}</ol>`;\n    var instHTML = \"<ul>\";\n    var _iterator = _createForOfIteratorHelper(json.instructions),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _i = _step.value;\n        instHTML += \"<li>\".concat(_i, \"</li>\");\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    instHTML += \"</ul>\";\n    document.querySelector(\"#instructions\").innerHTML = instHTML;\n  };\n  xhr.onerror = function (e) {\n    return console.log(\"In onerror - HTTP Status Code = \".concat(e.target.status));\n  };\n  xhr.open(\"GET\", url);\n  xhr.send();\n}\n\n//# sourceURL=webpack://alexiou-l-hw2/./src/loader.js?");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => (/* binding */ init)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n/* harmony import */ var _audio_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./audio.js */ \"./src/audio.js\");\n/* harmony import */ var _canvas_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./canvas.js */ \"./src/canvas.js\");\n/*\r\n\tmain.js is primarily responsible for hooking up the UI to the rest of the application \r\n\tand setting up the main event loop\r\n*/\n\n// We will write the functions in this file in the traditional ES5 way\n// In this instance, we feel the code is more readable if written this way\n// If you want to re-write these as ES6 arrow functions, to be consistent with the other files, go ahead!\n\n\n\n\n\n// parameters determined/updated in HTML, control variables for functions/actions.\nvar drawParams = {\n  showBars: true,\n  showCircles: true,\n  showNoise: false,\n  showInvert: false,\n  showEmboss: false,\n  showHighshelf: false,\n  showLowshelf: false,\n  showDistortion: false\n};\nvar distortionAmount = 0;\n\n// 1 - here we are faking an enumeration\nvar DEFAULTS = Object.freeze({\n  sound1: \"media/Stop a Gaben.mp3\"\n});\nvar init = function init() {\n  console.log(\"init called\");\n  console.log(\"Testing utils.getRandomColor() import: \".concat(_utils_js__WEBPACK_IMPORTED_MODULE_0__.getRandomColor()));\n  _audio_js__WEBPACK_IMPORTED_MODULE_1__.setupWebaudio(DEFAULTS.sound1);\n  var canvasElement = document.querySelector(\"canvas\"); // hookup <canvas> element\n  setupUI(canvasElement);\n  _canvas_js__WEBPACK_IMPORTED_MODULE_2__.setupCanvas(canvasElement, _audio_js__WEBPACK_IMPORTED_MODULE_1__.analyserNode);\n  loop();\n};\nvar setupUI = function setupUI(canvasElement) {\n  // A - hookup fullscreen button\n  var fsButton = document.querySelector(\"#fs-button\");\n\n  // add .onclick event to button\n  fsButton.onclick = function (e) {\n    console.log(\"init called\");\n    _utils_js__WEBPACK_IMPORTED_MODULE_0__.goFullscreen(canvasElement);\n  };\n\n  // B - hookup play button\n  var playButton = document.querySelector(\"#play-button\");\n\n  // add .onclick event to button\n  playButton.onclick = function (e) {\n    console.log(\"audioCtx.state before = \".concat(_audio_js__WEBPACK_IMPORTED_MODULE_1__.audioCtx.state));\n\n    // check if context is in suspended state (autoplay policy)\n    if (_audio_js__WEBPACK_IMPORTED_MODULE_1__.audioCtx.state == \"suspended\") {\n      _audio_js__WEBPACK_IMPORTED_MODULE_1__.audioCtx.resume();\n    }\n    console.log(\"audioCtx.state after = \".concat(_audio_js__WEBPACK_IMPORTED_MODULE_1__.audioCtx.state));\n    if (e.target.dataset.playing == \"no\") {\n      // if track is currently paused, play it\n      _audio_js__WEBPACK_IMPORTED_MODULE_1__.playCurrentSound();\n      e.target.dataset.playing = \"yes\"; // our CSS will set to text to \"Pause\"\n      //if track IS playing, pause it\n    } else {\n      _audio_js__WEBPACK_IMPORTED_MODULE_1__.pauseCurrentSound();\n      e.target.dataset.playing = \"no\";\n    }\n  };\n\n  // C - Hookup volume slider & label\n  var volumeSlider = document.querySelector(\"#volume-slider\");\n  var volumeLabel = document.querySelector(\"#volume-label\");\n  document.querySelector('#slider-distortion').value = distortionAmount;\n\n  //add .oninput event to slider\n  volumeSlider.oninput = function (e) {\n    //set the gain\n    _audio_js__WEBPACK_IMPORTED_MODULE_1__.setVolume(e.target.value);\n    //update value  of label to match value of slider\n    volumeLabel.innerHTML = Math.round(e.target.value / 2 * 100);\n  };\n\n  //set value of label to match initial value of slider\n  volumeSlider.dispatchEvent(new Event(\"input\"));\n\n  // D - Hookup track <select>\n  var trackSelect = document.querySelector(\"#track-select\");\n  //add .onchange event to <select>\n  trackSelect.onchange = function (e) {\n    _audio_js__WEBPACK_IMPORTED_MODULE_1__.loadSoundFile(e.target.value);\n    //pause the current track if it is playing\n    if (playButton.dataset.playing == \"yes\") {\n      playButton.dispatchEvent(new MouseEvent(\"click\"));\n    }\n  };\n  var audioSelect = document.querySelector('#audio-select');\n  audioSelect.onchange = function (e) {\n    var sample = new Uint8Array(_audio_js__WEBPACK_IMPORTED_MODULE_1__.analyserNode.fftSize / 2);\n    if (e.target.value == 'Frequency') {\n      _audio_js__WEBPACK_IMPORTED_MODULE_1__.analyserNode.getByteFrequencyData(sample);\n    } else {\n      _audio_js__WEBPACK_IMPORTED_MODULE_1__.analyserNode.getByteTimeDomainData(sample);\n    }\n  };\n\n  // E - Hookup toggles\n  document.querySelector(\"#bars-cb\").onclick = function (e) {\n    //showBars = e.target.checked;\n    drawParams.showBars = e.target.checked;\n  };\n  document.querySelector(\"#circles-cb\").onclick = function (e) {\n    //showCircles = e.target.checked;\n    drawParams.showCircles = e.target.checked;\n  };\n  document.querySelector(\"#noise-cb\").onclick = function (e) {\n    //showNoise = e.target.checked;\n    drawParams.showNoise = e.target.checked;\n  };\n  document.querySelector(\"#invert-cb\").onclick = function (e) {\n    //showInvert = e.target.checked;\n    drawParams.showInvert = e.target.checked;\n  };\n  document.querySelector(\"#emboss-cb\").onclick = function (e) {\n    //showEmboss = e.target.checked;\n    drawParams.showEmboss = e.target.checked;\n  };\n  document.querySelector('#highshelf-cb').onchange = function (e) {\n    drawParams.showHighshelf = e.target.checked;\n    toggleHighshelf(); // turn on or turn off the filter, depending on the value of `highshelf`!\n  };\n\n  document.querySelector('#lowshelf-cb').onchange = function (e) {\n    drawParams.showLowshelf = e.target.checked;\n    toggleLowshelf(); // turn on or turn off the filter, depending on the value of `lowshelf`!\n  };\n\n  document.querySelector('#distortion-cb').onchange = function (e) {\n    drawParams.showDistortion = e.target.checked;\n    toggleDistortion(); // turn on or turn off the filter, depending on the value of `distortion`!\n  };\n\n  document.querySelector('#slider-distortion').onchange = function (e) {\n    distortionAmount = Number(e.target.value);\n    toggleDistortion();\n  };\n  toggleHighshelf(); // when the app starts up, turn on or turn off the filter, depending on the value of `highshelf`!\n  toggleLowshelf(); // when the app starts up, turn on or turn off the filter, depending on the value of `lowshelf`!\n  toggleDistortion();\n}; // end setupUI\n\nvar loop = function loop() {\n  setTimeout(loop, 1000 / 60);\n  //requestAnimationFrame(loop);\n  _canvas_js__WEBPACK_IMPORTED_MODULE_2__.draw(drawParams);\n};\n\n//toggle high-shelf sound altering\nvar toggleHighshelf = function toggleHighshelf() {\n  if (drawParams.showHighshelf) {\n    _audio_js__WEBPACK_IMPORTED_MODULE_1__.biquadFilter.frequency.setValueAtTime(1000, _audio_js__WEBPACK_IMPORTED_MODULE_1__.audioCtx.currentTime); // we created the `biquadFilter` (i.e. \"treble\") node last time\n    _audio_js__WEBPACK_IMPORTED_MODULE_1__.biquadFilter.gain.setValueAtTime(25, _audio_js__WEBPACK_IMPORTED_MODULE_1__.audioCtx.currentTime);\n  } else {\n    _audio_js__WEBPACK_IMPORTED_MODULE_1__.biquadFilter.gain.setValueAtTime(0, _audio_js__WEBPACK_IMPORTED_MODULE_1__.audioCtx.currentTime);\n  }\n};\n\n//toggle low-shelf sound altering\nvar toggleLowshelf = function toggleLowshelf() {\n  if (drawParams.showLowshelf) {\n    _audio_js__WEBPACK_IMPORTED_MODULE_1__.lowShelfBiquadFilter.frequency.setValueAtTime(1000, _audio_js__WEBPACK_IMPORTED_MODULE_1__.audioCtx.currentTime);\n    _audio_js__WEBPACK_IMPORTED_MODULE_1__.lowShelfBiquadFilter.gain.setValueAtTime(15, _audio_js__WEBPACK_IMPORTED_MODULE_1__.audioCtx.currentTime);\n  } else {\n    _audio_js__WEBPACK_IMPORTED_MODULE_1__.lowShelfBiquadFilter.gain.setValueAtTime(0, _audio_js__WEBPACK_IMPORTED_MODULE_1__.audioCtx.currentTime);\n  }\n};\n\n// Toggles distortion, and sets sprite alpha based on input\nvar toggleDistortion = function toggleDistortion() {\n  if (drawParams.showDistortion) {\n    _audio_js__WEBPACK_IMPORTED_MODULE_1__.distortionFilter.curve = null; // being paranoid and trying to trigger garbage collection\n    _audio_js__WEBPACK_IMPORTED_MODULE_1__.distortionFilter.curve = makeDistortionCurve(distortionAmount);\n    _canvas_js__WEBPACK_IMPORTED_MODULE_2__.fire.setTransparency(distortionAmount / 100);\n  } else {\n    _audio_js__WEBPACK_IMPORTED_MODULE_1__.distortionFilter.curve = null;\n    _canvas_js__WEBPACK_IMPORTED_MODULE_2__.fire.setTransparency(0);\n  }\n};\n\n// from: https://developer.mozilla.org/en-US/docs/Web/API/WaveShaperNode\nvar makeDistortionCurve = function makeDistortionCurve() {\n  var amount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 20;\n  var n_samples = 256,\n    curve = new Float32Array(n_samples);\n  for (var i = 0; i < n_samples; ++i) {\n    var x = i * 2 / n_samples - 1;\n    curve[i] = (Math.PI + amount) * x / (Math.PI + amount * Math.abs(x));\n  }\n  return curve;\n};\n\n\n//# sourceURL=webpack://alexiou-l-hw2/./src/main.js?");

/***/ }),

/***/ "./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getAverageOfArray\": () => (/* binding */ getAverageOfArray),\n/* harmony export */   \"getLinearGradient\": () => (/* binding */ getLinearGradient),\n/* harmony export */   \"getRandomColor\": () => (/* binding */ getRandomColor),\n/* harmony export */   \"goFullscreen\": () => (/* binding */ goFullscreen),\n/* harmony export */   \"makeColor\": () => (/* binding */ makeColor)\n/* harmony export */ });\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nvar makeColor = function makeColor(red, green, blue) {\n  var alpha = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  return \"rgba(\".concat(red, \",\").concat(green, \",\").concat(blue, \",\").concat(alpha, \")\");\n};\nvar getRandom = function getRandom(min, max) {\n  return Math.random() * (max - min) + min;\n};\nvar getRandomColor = function getRandomColor() {\n  var floor = 35; // so that colors are not too bright or too dark \n  var getByte = function getByte() {\n    return getRandom(floor, 255 - floor);\n  };\n  return \"rgba(\".concat(getByte(), \",\").concat(getByte(), \",\").concat(getByte(), \",1)\");\n};\nvar getLinearGradient = function getLinearGradient(ctx, startX, startY, endX, endY, colorStops) {\n  var lg = ctx.createLinearGradient(startX, startY, endX, endY);\n  var _iterator = _createForOfIteratorHelper(colorStops),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var stop = _step.value;\n      lg.addColorStop(stop.percent, stop.color);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return lg;\n};\n\n// getAverageOfArray - Adds all elements of an array then takes the average.\nvar getAverageOfArray = function getAverageOfArray(array) {\n  var value = 0;\n  var _iterator2 = _createForOfIteratorHelper(array),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var a = _step2.value;\n      value += a;\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  value = value / array.length;\n  //console.log(value);\n  return value;\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API\nvar goFullscreen = function goFullscreen(element) {\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element.mozRequestFullscreen) {\n    element.mozRequestFullscreen();\n  } else if (element.mozRequestFullScreen) {\n    // camel-cased 'S' was changed to 's' in spec\n    element.mozRequestFullScreen();\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n  }\n  // .. and do nothing if the method is not supported\n};\n\n\n\n//# sourceURL=webpack://alexiou-l-hw2/./src/utils.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.js");
/******/ 	
/******/ })()
;